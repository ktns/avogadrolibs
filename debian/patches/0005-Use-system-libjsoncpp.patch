From: Katsuhiko Nishimra <ktns.87@gmail.com>
Date: Wed, 6 Jan 2016 18:19:03 +0900
Subject: Use system libjsoncpp

---
 avogadro/io/CMakeLists.txt  | 48 ++++++++++++++++++++++++---------------------
 avogadro/io/cjsonformat.cpp |  2 +-
 2 files changed, 27 insertions(+), 23 deletions(-)

diff --git a/avogadro/io/CMakeLists.txt b/avogadro/io/CMakeLists.txt
index 4466721..c051df6 100644
--- a/avogadro/io/CMakeLists.txt
+++ b/avogadro/io/CMakeLists.txt
@@ -1,40 +1,44 @@
 find_package(Eigen3 REQUIRED)
 find_package(HDF5 REQUIRED COMPONENTS C)
+find_package(PkgConfig REQUIRED)
+pkg_check_modules(JSONCPP REQUIRED jsoncpp)
+
 # Add as "system headers" to avoid warnings generated by them with
 # compilers that support that notion.
 include_directories(SYSTEM "${EIGEN3_INCLUDE_DIR}"
-  "${HDF5_INCLUDE_DIRS}"
-  "${AvogadroLibs_SOURCE_DIR}/thirdparty/pugixml"
-  "${AvogadroLibs_SOURCE_DIR}/thirdparty/jsoncpp")
+	"${HDF5_INCLUDE_DIRS}"
+	"${JSONCPP_INCLUDE_DIRS}"
+	"${AvogadroLibs_SOURCE_DIR}/thirdparty/pugixml")
 
 if(DEFINED AvogadroLibs_MEMORY_INCLUDE_DIRS)
-  # The smart pointer classes just require headers.
-  include_directories(SYSTEM ${AvogadroLibs_MEMORY_INCLUDE_DIRS})
+	# The smart pointer classes just require headers.
+	include_directories(SYSTEM ${AvogadroLibs_MEMORY_INCLUDE_DIRS})
 endif()
 
 set(HEADERS
-  cjsonformat.h
-  cmlformat.h
-  fileformat.h
-  fileformatmanager.h
-  gromacsformat.h
-  hdf5dataformat.h
-  mdlformat.h
-  xyzformat.h
+	cjsonformat.h
+	cmlformat.h
+	fileformat.h
+	fileformatmanager.h
+	gromacsformat.h
+	hdf5dataformat.h
+	mdlformat.h
+	xyzformat.h
 )
 
 set(SOURCES
-  cjsonformat.cpp
-  cmlformat.cpp
-  fileformat.cpp
-  fileformatmanager.cpp
-  gromacsformat.cpp
-  hdf5dataformat.cpp
-  mdlformat.cpp
-  xyzformat.cpp
+	cjsonformat.cpp
+	cmlformat.cpp
+	fileformat.cpp
+	fileformatmanager.cpp
+	gromacsformat.cpp
+	hdf5dataformat.cpp
+	mdlformat.cpp
+	xyzformat.cpp
 )
 
 avogadro_add_library(AvogadroIO ${HEADERS} ${SOURCES})
 
 # hdf5 is the HDF5 imported target
-target_link_libraries(AvogadroIO LINK_PUBLIC AvogadroCore LINK_PRIVATE ${HDF5_LIBRARIES})
+target_link_libraries(AvogadroIO LINK_PUBLIC AvogadroCore
+	LINK_PRIVATE ${HDF5_LIBRARIES} ${JSONCPP_LIBRARIES})
diff --git a/avogadro/io/cjsonformat.cpp b/avogadro/io/cjsonformat.cpp
index ff713dd..cf71cf1 100644
--- a/avogadro/io/cjsonformat.cpp
+++ b/avogadro/io/cjsonformat.cpp
@@ -22,7 +22,7 @@
 #include <avogadro/core/molecule.h>
 #include <avogadro/core/unitcell.h>
 
-#include <jsoncpp.cpp>
+#include <json/json.h>
 
 namespace Avogadro {
 namespace Io {
